<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Decoder (vorbis.Vorbis.File.Decoder)</title><meta charset="utf-8"/><link rel="stylesheet" href="../../../../odoc.support/odoc.css"/><meta name="generator" content="odoc 2.4.4"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../index.html">vorbis</a> &#x00BB; <a href="../../index.html">Vorbis</a> &#x00BB; <a href="../index.html">File</a> &#x00BB; Decoder</nav><header class="odoc-preamble"><h1>Module <code><span>File.Decoder</span></code></h1></header><div class="odoc-content"><div class="odoc-spec"><div class="spec type anchored" id="type-t"><a href="#type-t" class="anchor"></a><code><span><span class="keyword">type</span> t</span></code></div><div class="spec-doc"><p>Internal state of a decoder.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-create"><a href="#val-create" class="anchor"></a><code><span><span class="keyword">val</span> create : 
  <span><span>(<span>int <span class="arrow">&#45;&gt;</span></span> string * int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>int <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Unix</span>.seek_command <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span>
  <span><span>(<span>unit <span class="arrow">&#45;&gt;</span></span> int)</span> <span class="arrow">&#45;&gt;</span></span>
  <a href="#type-t">t</a></span></code></div><div class="spec-doc"><p><code>create read_func seek_func tell_func params</code> opens a * stream like <code>openfile</code> for decoding but callbacks are used to * manipulate the data. <code>read_func</code> should return the requested amount of bytes * (or less if it is the end of file), <code>seek_funk</code> should return 0 if the seek * was ok or -1 if the stream is not seekable, <code>tell_func</code> should return the current * offset or -1 if there is no notion of offset in the stream. * Raises: <code>Read_error</code>, <code>Not_vorbis</code>, <code>Version_mismatch</code>, <code>Bad_header</code>, <code>Internal_fault</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-openfile"><a href="#val-openfile" class="anchor"></a><code><span><span class="keyword">val</span> openfile : <span>string <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a> * <span class="xref-unresolved">Unix</span>.file_descr</span></code></div><div class="spec-doc"><p>Open a vorbis file for decoding.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-openfile_with_fd"><a href="#val-openfile_with_fd" class="anchor"></a><code><span><span class="keyword">val</span> openfile_with_fd : <span><span class="xref-unresolved">Unix</span>.file_descr <span class="arrow">&#45;&gt;</span></span> <a href="#type-t">t</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-decode_float"><a href="#val-decode_float" class="anchor"></a><code><span><span class="keyword">val</span> decode_float : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><span><span>float array</span> array</span> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p><code>decode_float dec buff ofs len</code> decodes <code>len</code> samples in each channel and puts * the result in <code>buff</code> starting at position <code>ofs</code>. * </p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../index.html#exception-Hole_in_data"><code>Hole_in_data</code></a> <p>if there was an interruption of the data. * </p><p>@raise Invalid_parameters</p><p>if all the data cannot fit in the buffer starting at the given position.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-decode_float_alloc"><a href="#val-decode_float_alloc" class="anchor"></a><code><span><span class="keyword">val</span> decode_float_alloc : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span>int <span class="arrow">&#45;&gt;</span></span> <span><span>float array</span> array</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-decode_float_ba"><a href="#val-decode_float_ba" class="anchor"></a><code><span><span class="keyword">val</span> decode_float_ba : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span><span><span>(float, <span class="xref-unresolved">Stdlib</span>.Bigarray.float32_elt, <span class="xref-unresolved">Stdlib</span>.Bigarray.c_layout)</span>
    <span class="xref-unresolved">Stdlib</span>.Bigarray.Array1.t</span>
    array</span> <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  int</span></code></div><div class="spec-doc"><p><code>decode_float_ba dec buff ofs len</code> decodes <code>len</code> samples in each channel and puts * the result in <code>buff</code> starting at position <code>ofs</code>. * </p><ul class="at-tags"><li class="raises"><span class="at-tag">raises</span> <a href="../../index.html#exception-Hole_in_data"><code>Hole_in_data</code></a> <p>if there was an interruption of the data. * </p><p>@raise Invalid_parameters</p><p>if all the data cannot fit in the buffer starting at the given position.</p></li></ul></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-decode_float_alloc_ba"><a href="#val-decode_float_alloc_ba" class="anchor"></a><code><span><span class="keyword">val</span> decode_float_alloc_ba : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span><span><span>(float, <span class="xref-unresolved">Stdlib</span>.Bigarray.float32_elt, <span class="xref-unresolved">Stdlib</span>.Bigarray.c_layout)</span>
    <span class="xref-unresolved">Stdlib</span>.Bigarray.Array1.t</span>
    array</span></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-decode"><a href="#val-decode" class="anchor"></a><code><span><span class="keyword">val</span> decode : 
  <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?big_endian</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?sample_size</span>:int <span class="arrow">&#45;&gt;</span></span>
  <span><span class="optlabel">?signed</span>:bool <span class="arrow">&#45;&gt;</span></span>
  <span>bytes <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  <span>int <span class="arrow">&#45;&gt;</span></span>
  int</span></code></div><div class="spec-doc"><p>Same as <code>decode_float</code> but decodes to integers.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-streams"><a href="#val-streams" class="anchor"></a><code><span><span class="keyword">val</span> streams : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Get the number of logical bitstreams within a physical bitstream.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bitstream"><a href="#val-bitstream" class="anchor"></a><code><span><span class="keyword">val</span> bitstream : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../index.html#type-bitstream">bitstream</a></span></code></div><div class="spec-doc"><p>Get the index of the sequential logical bitstream currently being decoded * (incremented at chaining boundaries even for non-seekable streams). For * seekable streams, it represents the actual chaining index within the * physical bitstream.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-comments"><a href="#val-comments" class="anchor"></a><code><span><span class="keyword">val</span> comments : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../index.html#type-bitstream">bitstream</a> <span class="arrow">&#45;&gt;</span></span> string * <span><span>(string * string)</span> list</span></span></code></div><div class="spec-doc"><p>Get the vorbis comments from a vorbis file. The second argument is the * number of the logical bitstream (the current bitstream is used if it is set * to <code>None</code>).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-info"><a href="#val-info" class="anchor"></a><code><span><span class="keyword">val</span> info : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../index.html#type-bitstream">bitstream</a> <span class="arrow">&#45;&gt;</span></span> <a href="../../index.html#type-info">info</a></span></code></div><div class="spec-doc"><p>Get the vorbis information from the stream header of a bitstream.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-bitrate"><a href="#val-bitrate" class="anchor"></a><code><span><span class="keyword">val</span> bitrate : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../index.html#type-bitstream">bitstream</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Get the bitrate of a bitsream (in bps).</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-samples"><a href="#val-samples" class="anchor"></a><code><span><span class="keyword">val</span> samples : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../index.html#type-bitstream">bitstream</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Get the total pcm samples of a bitstream.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-duration"><a href="#val-duration" class="anchor"></a><code><span><span class="keyword">val</span> duration : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../index.html#type-bitstream">bitstream</a> <span class="arrow">&#45;&gt;</span></span> float</span></code></div><div class="spec-doc"><p>Get the duration in seconds of a bitstream.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-serialnumber"><a href="#val-serialnumber" class="anchor"></a><code><span><span class="keyword">val</span> serialnumber : <span><a href="#type-t">t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../index.html#type-bitstream">bitstream</a> <span class="arrow">&#45;&gt;</span></span> int</span></code></div><div class="spec-doc"><p>Get the serial number of a bitstream.</p></div></div></div></body></html>
